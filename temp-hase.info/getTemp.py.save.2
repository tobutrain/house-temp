import json
import time
import requests
import datetime


while True:
    js_1 = requests.get("http://ambidata.io/api/v2/channels/45860/data?&readKey=9a5d4da14c1c1748&n=1")
    js_2 = requests.get("http://ambidata.io/api/v2/channels/45861/data?&readKey=bf91b4b4953bb597&n=1")
    js_3 = requests.get("http://ambidata.io/api/v2/channels/45862/data?&readKey=3931de126d84d265&n=1")
    js_4 = requests.get("http://ambidata.io/api/v2/channels/45863/data?&readKey=7928fdfe2bc2a3cf&n=1")
    js_5 = requests.get("http://ambidata.io/api/v2/channels/45864/data?&readKey=fb85ec6edc5e82d6&n=1")
    js_6 = requests.get("http://ambidata.io/api/v2/channels/45865/data?&readKey=b91097b4ee8f7320&n=1")
    js_7 = requests.get("http://ambidata.io/api/v2/channels/45866/data?&readKey=8e40f5bc024aedd9&n=1")
    js_8 = requests.get("http://ambidata.io/api/v2/channels/45867/data?&readKey=269393e563d71a55&n=1")

    strjs_1 = js_1.text
    strjs_2 = js_2.text
    strjs_3 = js_3.text
    strjs_4 = js_4.text
    strjs_5 = js_5.text
    strjs_6 = js_6.text
    strjs_7 = js_7.text
    strjs_8 = js_8.text

    list_1 = json.loads(strjs_1)
    list_2 = json.loads(strjs_2)
    list_3 = json.loads(strjs_3)
    list_4 = json.loads(strjs_4)
    list_5 = json.loads(strjs_5)
    list_6 = json.loads(strjs_6)
    list_7 = json.loads(strjs_7)
    list_8 = json.loads(strjs_8)

    arr_1=list_1[0]
    arr_2=list_2[0]
    arr_3=list_3[0]
    arr_4=list_4[0]
    arr_5=list_5[0]
    arr_6=list_6[0]
    arr_7=list_7[0]
    arr_8=list_8[0]

    temp_1=arr_1['d1']
    temp_2=arr_2['d1']
    temp_3=arr_3['d1']
    temp_4=arr_4['d1']
    temp_5=arr_5['d1']
    temp_6=arr_6['d1']
    temp_7=arr_7['d1']
    temp_8=arr_8['d1'

    temp_1=str(temp_1)
    temp_2=str(temp_2)
    temp_3=str(temp_3)
    temp_4=str(temp_4)
    temp_5=str(temp_5)
    temp_6=str(temp_6)
    temp_7=str(temp_7)
    temp_8=str(temp_8)

    time_1

    dt_now = datetime.datetime.now()
    getdate = dt_now.strftime('%m月%d日 %H:%M:%S')

    tx = open("./txt/temp.html","w",encoding='utf-8')

    tx.write("<style>th{font-size:70px;}td{font-size:120px;}p{font-size:70px;}</style>")
    tx.write("<table border='1' height='20'><tr><th width='500'>センサーNo.</th><th width='500'>現在温度</th></tr>")
    tx.write("<tr><td>No.1</td><td>"+temp_1+"℃</td></tr>")
    tx.write("<tr><td>No.2</td><td>"+temp_2+"℃</td></tr>")
    tx.write("<tr><td>No.3</td><td>"+temp_3+"℃</td></tr>")
    tx.write("<tr><td>No.4</td><td>"+temp_4+"℃</td></tr>")
    tx.write("<tr><td>No.5</td><td>"+temp_5+"℃</td></tr>")
    tx.write("<tr><td>No.6</td><td>"+temp_6+"℃</td></tr>")
    tx.write("<tr><td>No.7</td><td>"+temp_7+"℃</td></tr>")
    tx.write("<tr><td>No.8</td><td>"+temp_8+"℃</td></tr></table>")
    tx.write("<p>取得日時:"+getdate+"</p>")

    tx.close()

    time.sleep(30)
